<!DOCTYPE html>
<html>
<head>
  <title>'Asian sweatshop' | Welcome back, <%= me.name %>!</title>
  <!-- Viewport mobile tag for sensible mobile support -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!--STYLES-->
  <link rel="stylesheet" href="/styles/angular-toastr.css">
  <link rel="stylesheet" href="/styles/bootstrap.3.1.1.css">
  <link rel="stylesheet" href="/styles/bootstrap.css">
  <link rel="stylesheet" href="/styles/importer.css">
  <!--STYLES END-->
  <!--Added this so the client has access to the csrf tag and it's grabbed first service side on every page -->
  <script type="text/javascript">
    window.SAILS_LOCALS = {
      _csrf: '<%= _csrf %>',
      me: <%- JSON.stringify(me) %>
    };
  </script>


</head>

<body>
<!-- container = Fixed-width container container-fluid = full-width -->
<div class="container-fluid">
  <!-- Creates the navbar -->
  <nav role="navigation" class="navbar navbar-inverse">
    <!-- This creates the mechanism for collapse button -->
    <button type="button" class="navbar-toggle" data-toggle="collapse" ng-init="navCollapsed = true"
            ng-click="navCollapsed = !navCollapsed">
      <!-- This controls the number of lines in the image when the nav collapse -->
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <!-- This is the brand on the left-hand side. -->
    <a class="navbar-brand" href="/#"> 'Asian sweatshop'</a>
    <div class="collapse navbar-collapse" ng-class="!navCollapsed && 'in'">
      <!-- This is what is the above collapse button points to when the mark-up below is collapsed -->
        <ul class="nav navbar-nav navbar-right">
          <li>
            <form role="search" class="navbar-form navbar-left" ng-submit="submitSearch()">
              <div class="form-group">
                <input type="text" placeholder="Search" class="form-control">
              </div>
              <button type="submit" class="btn btn-default">Search</button>
            </form>
          </li>
          <!-- navbar-right pulls this element right -->
          <!-- Using ng-show instead of ng-if because we need this mark-up to be in the dom when signup controller
          fires.  If it's not there (which it wouldn't be in the case of ng-if) then the scope of the signup
          controller will not be tied to this element. -->
          <!-- Everyone's interface -->
          <li>
            <a href="/profile">Profile</a>
          </li>
          <li>
            <a href="/products">Products</a>
          </li>
          <% if (me.role === 1) { %>
          <!-- Admin interface -->
          <li>
            <a href="/showUsers">Manage users</a>
          </li>
          <% } else if (me.role === 3) { %>
          <!-- Merchant interface -->
          <li>
            <a href="/addItem">Add items</a>
          </li>
          <li>
            <a href="#">Manage items</a>
          </li>
          <% } %>
          <!-- Everyone's interface -->
          <li>
            <a href="/#">My Cart</a>
          </li>
          <li>
            <a href="/#">My order</a>
          </li>
          <li>
            <a href="/logout">Sign-out</a>
          </li>
          <!-- <a ng-controller="signinController" class="btn btn-default navbar-btn navbar-right" href="#" ng-if="!isAuthenticated">sign-in</a> -->
          <!-- Using ng-show instead of ng-if because we need this mark-up to be in the dom when signup controller
          fires.  If it's not there (which it wouldn't be in the case of ng-if) then the scope of the signup
          controller will not be tied to this element. -->
        </ul>
      </div>
  </nav>
</div>

<%- body %>

<!--SCRIPTS-->
<script src="/js/dependencies/sails.io.js"></script>
<script src="/js/dependencies/angular.1.3.js"></script>
<script src="/js/dependencies/angular-toastr.js"></script>
<script src="/js/dependencies/compareTo.module.js"></script>
<script src="/js/dependencies/jquery.js"></script>
<script src="/js/dependencies/simpleCart.js"></script>
<script src="/js/private/dashboard/DashboardModule.js"></script>
<script src="/js/public/homepage/HomepageModule.js"></script>
<!--SCRIPTS END-->

</body>
</html>
